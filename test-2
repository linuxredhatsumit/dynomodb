app_user@KBUTEC81L20293:~$ helm repo list | grep coralogix
coralogix-charts-virtual                                        https://cgx.jfrog.io/artifactory/coralogix-charts-virtual
coralogix                                                       https://cgx.jfrog.io/artifactory/coralogix-charts-virtual
coralogix-uat                                                   https://cgx.jfrog.io/artifactory/coralogix-charts-virtual
app_user@KBUTEC81L20293:~$ helm list | grep coralogix
app_user@KBUTEC81L20293:~$ helm list -n coralogix | grep coralogix
otel-coralogix-integration      coralogix       23              2025-08-06 10:56:53.632641396 +0000 UTC deployed        otel-integration-0.0.208
app_user@KBUTEC81L20293:~$


below is value.yaml
global:
  clusterName: uat-kotak811
  collectionInterval: 60s
  domain: coralogix.in
opentelemetry-agent:
  config:
    processors:
      filter/drop-istio-proxy:
        logs:
          exclude:
            match_type: regexp
            resource_attributes:
            - key: k8s.container.name
              value: .*istio-proxy.*
      transform/remove-loglabels:
        error_mode: ignore
        log_statements:
        - context: log
          statements:
          - delete_key(attributes, "host.image.id")
          - delete_key(attributes, "log.file.path")
          - delete_key(attributes, "log.iostream")
          - delete_key(attributes, "time")
          - delete_key(resource.attributes, "k8s.pod.uid")
          - delete_key(resource.attributes, "cloud.account.id")
          - delete_key(resource.attributes, "cloud.platform")
          - delete_key(resource.attributes, "cloud.availability.zone")
          - delete_key(resource.attributes, "cloud.availability_zone")
          - delete_key(resource.attributes, "os.type")
          - delete_key(resource.attributes, "cloud.provider")
          - delete_key(resource.attributes, "cloud.region")
          - delete_key(resource.attributes, "host.type")
      transform/service_name:
        error_mode: silent
        trace_statements:
        - context: span
          statements:
          - set(resource.attributes["service.name"], resource.attributes["k8s.deployment.name"])
            where resource.attributes["k8s.deployment.name"] != nil
    receivers:
      prometheus/istio:
        config:
          scrape_configs:
            - job_name: 'istio-sidecars'
              metrics_path: /stats/prometheus
              scrape_interval: 30s
              kubernetes_sd_configs:
                - role: pod
              relabel_configs:
                - source_labels: [__meta_kubernetes_pod_container_name]
                  regex: istio-proxy
                  action: keep
                - source_labels: [__meta_kubernetes_pod_ip]
                  target_label: __address__
                  replacement: $1:15020
    service:
      pipelines:
        logs:
          exporters:
          - coralogix
          processors:
          - k8sattributes
          - resourcedetection/env
          - resourcedetection/region
          - transform/remove-loglabels
          - filter/drop-istio-proxy
          - batch
        metrics:
          exporters:
          - coralogix
          receivers:
          - prometheus/istio
        traces:
          exporters:
          - loadbalancing
          processors:
          - resource/metadata
          - resourcedetection/region
          - resourcedetection/env
          - k8sattributes
          - transform/k8s_attributes
          - transform/service_name
          - transform/semconv
          - batch
  enabled: true
  mode: daemonset
  presets:
    coralogixExporter:
      enabled: true
      pipelines:
      - none
      privateKey: ${env:CORALOGIX_PRIVATE_KEY}
    loadBalancing:
      enabled: true
      hostname: coralogix-opentelemetry-gateway
      routingKey: traceID
    spanMetrics:
      enabled: true
opentelemetry-agent-windows:
  enabled: false
opentelemetry-cluster-collector:
  enabled: true
opentelemetry-gateway:
  config:
    processors:
      tail_sampling:
        decision_wait: 15s
        num_traces: 100000
        policies:
        - and:
            and_sub_policy:
            - name: service-name-policy
              string_attribute:
                key: service.name
                values:
                - k811-ms-upi-payments
                - k811-ms-notifications
                - k811-ms-users
                - k811-upi-payments
                - k811-upi-processor
                - k811-notifications
                - k811-rewards-journey
              type: string_attribute
            - name: errors-policy
              status_code:
                status_codes:
                - ERROR
              type: status_code
            - name: randomized-policy
              probabilistic:
                sampling_percentage: 0.1
              type: probabilistic
          name: custom-policy
          type: and
        - name: errors-policy
          status_code:
            status_codes:
            - ERROR
          type: status_code
        - name: randomized-policy
          probabilistic:
            sampling_percentage: 1
          type: probabilistic
  enabled: true
  replicaCount: 3

