parameters:
  - name: DeployUAT
    type: boolean
    default: true
  - name: DeployDR
    type: boolean
    default: false
  - name: ImageTag
    type: string
    default: ''

# =============================================
# ============== UAT SECTION ==================
# =============================================
- ${{ if eq(parameters.DeployUAT, true) }}:
  - script: |
      pwd
      sed -i -e 's/name:.*/name: $(SERVICE_NAME)/' $(HELM_CHARTS_PATH)/Chart.yaml
      sed -i -e 's/appVersion:.*/appVersion: ${{ parameters.ImageTag }}/' $(HELM_CHARTS_PATH)/Chart.yaml
      sed -i -e 's/version:.*/version: ${{ parameters.ImageTag }}/' $(HELM_CHARTS_PATH)/Chart.yaml
    displayName: "UAT: Update Helm Chart Metadata"
    workingDirectory: $(System.DefaultWorkingDirectory)/$(REPOSITORY_NAME)/
