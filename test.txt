Login Succeeded
Pulling image from UAT ECR
811_app_ms_kyc-development-20250702.2: Pulling from 811uatonb/k811_ms_kyc
43c4264eed91: Already exists
95e03b2f0c1a: Already exists
75bffa3f6a2d: Already exists
5c440c83b4d2: Already exists
b852311cd915: Already exists
d7c4b29f69a2: Pulling fs layer
8cf7a731139d: Pulling fs layer
6ed6896a2cc5: Pulling fs layer
e98afa42fc34: Pulling fs layer
6de2e61c2638: Pulling fs layer
66214472a6b8: Pulling fs layer
65663d8b7898: Pulling fs layer
be7a0cdb0db4: Pulling fs layer
e98afa42fc34: Waiting
6de2e61c2638: Waiting
66214472a6b8: Waiting

Assuming PROD role to push to PROD ECR

An error occurred (AccessDenied) when calling the AssumeRole operation: User: arn:aws:sts::483584640083:assumed-role/AWS-EC2-Role/i-06950af8d81d0affc is not authorized to perform: sts:AssumeRole on resource: arn:aws:iam::718378052708:role/EKS-Setup-Role-Kotak811
Logging into PROD ECR
WARNING! Your password will be stored unencrypted in /home/app_user/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store

Login Succeeded
Checking if image exists in PROD ECR
Image not found in PROD ECR. Pushing...
The push refers to repository [718378052708.dkr.ecr.ap-south-1.amazonaws.com/811prodonb/k811_kyc]
08d00990453d: Preparing
b17b63edca77: Waiting
7d1bbfed2e41: Waiting
denied: User: arn:aws:sts::483584640083:assumed-role/AWS-EC2-Role/i-06950af8d81d0affc is not authorized to perform: ecr:InitiateLayerUpload on resource: arn:aws:ecr:ap-south-1:718378052708:repository/811prodonb/k811_kyc because no identity-based policy allows the ecr:InitiateLayerUpload action

##[error]Bash exited with code '1'.
Finishing: PROD: Promote Docker Image from UAT to PROD
