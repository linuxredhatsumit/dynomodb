Starting: Configure DynamoDB Auto Scaling
==============================================================================
Task         : Command line
Description  : Run a command line script using Bash on Linux and macOS and cmd.exe on Windows
Version      : 2.250.1
Author       : Microsoft Corporation
Help         : https://docs.microsoft.com/azure/devops/pipelines/tasks/utility/command-line
==============================================================================
Generating script.
========================== Starting Command Output ===========================
/usr/bin/bash --noprofile --norc /home/app_user/workspace/Agent1/_work/_temp/63d39469-f1ba-4fe8-a861-a3604858836a.sh
Running DynamoDB Auto Scaling Management Script
{"timestamp": "2025-06-27 18:00:11", "level": "INFO", "context": "autoscaling", "message": "{\"context\": \"args\", \"message\": \"Received arguments: tableName=global_scaling_inidex_test, region=ap-south-1, readMode=ondemand, writeMode=ondemand, minRead=1, maxRead=1, targetRead=70, minWrite=1, maxWrite=1, targetWrite=70, maxReadUnits=1, maxWriteUnits=1, checkGSI=True, dry-run=False\"}"}
{"timestamp": "2025-06-27 18:00:11", "level": "INFO", "context": "autoscaling", "message": "Found credentials in environment variables."}
{"timestamp": "2025-06-27 18:00:11", "level": "INFO", "context": "autoscaling", "message": "Found credentials from IAM Role: vpn-access"}
{"timestamp": "2025-06-27 18:00:12", "level": "INFO", "context": "config.load", "message": "Looking for config file at: /home/app_user/workspace/Agent1/_work/355/s/k811-ddb-index/global_scaling_inidex_test/scaling.json"}
{"timestamp": "2025-06-27 18:00:12", "level": "INFO", "context": "autoscaling", "message": "{\"context\": \"config.load\", \"message\": \"Loaded GSI config: {'referee-Index': {'ReadCapacityUnits': 1, 'WriteCapacityUnits': 1, 'MinReadCapacityUnits': 1, 'MaxReadCapacityUnits': 10, 'TargetReadUtilization': 70, 'MinWriteCapacityUnits': 1, 'MaxWriteCapacityUnits': 1, 'TargetWriteUtilization': 70, 'ProjectionType': 'INCLUDE', 'NonKeyAttributes': ['claimExpiryTime', 'referrerRewardId', 'rewardClaimedAt', 'refereeRewardStatus', 'epoch', 'refereeName', 'referrerRewardStatus', 'refereeRewardId', 'refereeRewardAmount', 'createdAt', 'referralCode', 'referralCompletedAt', 'referrerCrn', 'referrerRewardAmount', 'updatedAt']}, 'referrer-Index': {'ReadCapacityUnits': 1, 'WriteCapacityUnits': 1, 'MinReadCapacityUnits': 1, 'MaxReadCapacityUnits': 10, 'TargetReadUtilization': 70, 'MinWriteCapacityUnits': 1, 'MaxWriteCapacityUnits': 1, 'TargetWriteUtilization': 70, 'ProjectionType': 'INCLUDE', 'NonKeyAttributes': ['claimExpiryTime', 'referrerRewardId', 'rewardClaimedAt', 'refereeRewardStatus', 'epoch', 'refereeName', 'referrerRewardStatus', 'refereeRewardId', 'refereeRewardAmount', 'createdAt', 'referralCode', 'refereeCrn', 'referralCompletedAt', 'referrerRewardAmount', 'updatedAt']}}\"}"}
{"timestamp": "2025-06-27 18:00:12", "level": "INFO", "context": "autoscaling", "message": "{\"context\": \"global_tables\", \"message\": \"Table global_scaling_inidex_test is not a Global Table or has no replicas.\"}"}
{"timestamp": "2025-06-27 18:00:12", "level": "INFO", "context": "autoscaling", "message": "{\"context\": \"global_tables\", \"message\": \"Found replica regions: []\"}"}
{"timestamp": "2025-06-27 18:00:12", "level": "INFO", "context": "autoscaling", "message": "{\"context\": \"autoscaling.deregister.dynamodb:table:ReadCapacityUnits\", \"message\": \"Deregistered scalable target for table/global_scaling_inidex_test\"}"}
{"timestamp": "2025-06-27 18:00:12", "level": "INFO", "context": "autoscaling", "message": "{\"context\": \"autoscaling.deregister.dynamodb:table:WriteCapacityUnits\", \"message\": \"Deregistered scalable target for table/global_scaling_inidex_test\"}"}
{"timestamp": "2025-06-27 18:00:12", "level": "INFO", "context": "autoscaling", "message": "{\"context\": \"wait_for_no_scaling\", \"message\": \"Autoscaling fully deregistered for table global_scaling_inidex_test after 0 seconds\"}"}
{"timestamp": "2025-06-27 18:00:13", "level": "INFO", "context": "autoscaling", "message": "{\"context\": \"autoscaling.deregister.gsi\", \"message\": \"Deregistered scalable target for index referee-Index\"}"}
{"timestamp": "2025-06-27 18:00:13", "level": "INFO", "context": "autoscaling", "message": "{\"context\": \"autoscaling.deregister.gsi\", \"message\": \"Deregistered scalable target for index referee-Index\"}"}
{"timestamp": "2025-06-27 18:00:13", "level": "INFO", "context": "autoscaling", "message": "{\"context\": \"wait_for_no_scaling\", \"message\": \"Autoscaling fully deregistered for table global_scaling_inidex_test after 0 seconds\"}"}
{"timestamp": "2025-06-27 18:00:13", "level": "INFO", "context": "autoscaling", "message": "{\"context\": \"autoscaling.deregister.gsi\", \"message\": \"Deregistered scalable target for index referrer-Index\"}"}
{"timestamp": "2025-06-27 18:00:13", "level": "INFO", "context": "autoscaling", "message": "{\"context\": \"autoscaling.deregister.gsi\", \"message\": \"Deregistered scalable target for index referrer-Index\"}"}
{"timestamp": "2025-06-27 18:00:13", "level": "INFO", "context": "autoscaling", "message": "{\"context\": \"wait_for_no_scaling\", \"message\": \"Autoscaling fully deregistered for table global_scaling_inidex_test after 0 seconds\"}"}
{"timestamp": "2025-06-27 18:00:13", "level": "INFO", "context": "update_billing_mode", "message": "Attempt 1/3: Removing provisioned throughput..."}
{"timestamp": "2025-06-27 18:00:14", "level": "WARNING", "context": "autoscaling", "message": "{\"context\": \"update_billing_mode\", \"warning\": \"Validation error on attempt 1: Table write capacity should either be Pay-Per-Request or AutoScaled.. Retrying after 10 seconds...\"}"}
{"timestamp": "2025-06-27 18:00:25", "level": "INFO", "context": "update_billing_mode", "message": "Attempt 2/3: Removing provisioned throughput..."}
{"timestamp": "2025-06-27 18:00:26", "level": "WARNING", "context": "autoscaling", "message": "{\"context\": \"update_billing_mode\", \"warning\": \"Validation error on attempt 2: Table write capacity should either be Pay-Per-Request or AutoScaled.. Retrying after 10 seconds...\"}"}
{"timestamp": "2025-06-27 18:00:36", "level": "INFO", "context": "update_billing_mode", "message": "Attempt 3/3: Removing provisioned throughput..."}
